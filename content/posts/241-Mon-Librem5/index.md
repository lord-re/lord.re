+++
Author = "Lord"
Description = "√áa y est j'ai un Librem 5 un t√©l√©phone sous linux assez particulier."
Categories = ["librem", "linux"]
menu = "main"
notoc = true
WritingDate = 2023-05-07T19:10:26+02:00
date = 2023-05-08T14:10:26+02:00
title = "J'ai un Librem5 !"
editor = "vim on librem5"
TopWords = [ "usb", "appli", "matos", "menu", "clavier", "linux", "logiciel", "android", "t√©l√©phone","sway"]
+++
Rappelez-vous !
Vous les lecteurs les plus fid√®les de mon humble blog, il y a cinq ans j'√©tais tout foufou √† propos du **Librem5**.
√áa y est, j'en ai un !
J'ai enfin la chance de poss√©der cet ovni.

## Librem5, mais c'est quoi donc ?
Purism est une entreprise am√©ricaine qui fabrique des ordinateurs mais qui tente tant que possible de faire en sorte que toute la partie logicielle soit libre.
Ils ont leur propre distribution Linux bas√©e sur Debian, ils vendent des machines avec Libreboot, bref vous voyez le topo.

Ils ont mont√© un crowdfunding pour fabriquer le **Librem5** un smartphone tournant qu'avec du Logiciel Libre.
Ce n'est donc *pas de l'Android mais bel et bien un authentique Linux sur cette machine*.
Et voil√† qu'on a une belle brique chauffante !

Quand je dis que c'est un ovni, il faut bien voir que Purism s'attaque √† un truc qu'√† peu pr√®s personne d'autre ne fait.
{{< img src="librem5.jpg" alt="Photo du t√©l√©phone sur une table. On remarque qu'il est assez √©pais et pr√©sente trois boutons physiques." title="Aussi appel√© la brique avec des finitions pas top.">}}

*Ils fabriquent des ordinateurs et maintenant un t√©l√©phone o√π tout le logiciel n√©cessaire est libre*.
Le t√©l√©phone co√ªte cher, tr√®√®√®s cher.
On parle de **1200$ pour du matos qui est techniquement √† sa sortie √† la ramasse** niveau performance avec des finitions assez hasardeuses.
Mais ce prix permet de payer des devs pour √©crire des drivers, de l'interface, des applications libres et tout cela ‚Ä¶ bha oui √ßa n√©cessite du pognon.
On est pas dans le business model classique du smartphone o√π le constructeur sort un mod√®le avec pour objectif d'en vendre des palettes pendant un an et puis c'est tout.
Ici, *leur but est de sortir le matos mais √©galement d'√©crire tout le logiciel qui va avec et d'assurer une certaine dur√©e de vie √† l'appareil.*

Le fabricant de ce t√©l√©phone ne se fait pas trop d'illusion, ils ne visent pas le march√© grand-public, ils sont conscients des limites de leur t√©l√©phone.

## PureOS
L'OS fourni avec l'appareil est donc *un d√©riv√© de Debian avec un environnement Gnome*.
L'interface graphique est cependant pas du Gnome pur mais **Phosh** qui est *plus adapt√© √† une utilisation t√©l√©phone portable*.
C'est plus petit, √ßa utilise des gliss√©s, il y a une barre de statut assez ptite qui donne acc√®s √† des r√©glages rapides.
Ce n'est pas ma tasse de th√©.
Sur ordinateur fixe, j'ai jamais vraiment accroch√© √† Gnome surtout √† partir de la version 3.
J'ai toujours trouv√© que c'√©tait des *logiciels √©trangement foutus*.
√Ä chaque fois je trouve les r√©glages par d√©faut bizares et le pire c'est que souvent il n'y a pas sp√©cialement moyen de les modifier.

*Leur interface a √©t√© d√©cri√©e parcequ'elle semblait trop s'adapter au monde des t√©l√©phones et des tablettes et pourtant force est de constater que c'est du tout le cas.*
D'ailleurs Purism a fait un √©norme boulot aupr√®s de GTK avec leur **libhandy** qui sert √† adapter les logiciels aux tout petits √©crans des appareils portatifs (handheld).
Mais il faut que les logiciels soient adapt√©s pour utiliser cette derni√®re.

*J'ai test√© un peu leur distro quand j'ai re√ßu l'appareil mais franchement c'est pas du tout √† mon go√ªt.*
C'est lent et ‚Ä¶ bha mine de rien quand on est habitu√© au confort d'Android dont l'interface a √©t√© pens√©e et repens√©e ces quinze derni√®res ann√©es‚Ä¶ √ßa fait un choc.
Je n'ai m√™me pas pris le temps de prendre des screenshots.

C'est pas de la merde, j'ai pas dit √ßa, mais *√ßa n'a pas le m√™me niveau de finition et de raffinement d'Android.*
Android est aussi agr√©able √† utiliser gr√¢ce √† ses tr√®s nombreuses it√©rations.
√áa ne s'est pas fait du jour au lendemain, mais on a tendance √† oublier le boulot qu'ils ont d√©j√† accompli sur ce terrain.

Bref, PureOS c'est pas mal mais c'est loin d'√™tre fini et il faudra encore une montagne de taff pour am√©liorer la situation.

Il y a une ptite brochette d'appli install√©es de base.
C'est pas exhaustif mais √ßa a de quoi couvrir une ptite partie des besoins.
Par contre le catalogue est ‚Ä¶ tr√®s peu fourni.
Bref, *se contenter de PureOS me semble assez difficile.*

## Les probl√®mes de ce t√©l√©phone
Bon je vais pas tourner autour du pot, je ne me vois pas recommander ce t√©l√©phone.

### Soucis d'autonomie
D'un point de vue performance brutes, d√©j√†, c'est du matos un peu vieillot pour ceux qui suivent un peu le truc.
Mais bon, *c'est pas non plus un point r√©dhibitoire*.

Par contre *niveau autonomie c'est juste pas possible*.
La batterie du t√©l√©phone ne tient absolument pas.
*Il se vide tout seul √† environ 20% par heure* m√™me en ayant coup√© wifi et sans carte SIM.

Apparemment c'est en partie d√ª au matos utilis√©.
Le constructeur a choisi du mat√©riel avec des crit√®res assez particuliers : il fallait que √ßa tourne avec du logiciel libre.
Aurevoir le matos ultra optimis√©, le choix √©tait tr√®s restreint et on retrouve donc du mat√©riel qui √† la base n'est pas forc√©ment pr√©vu pour du mat√©riel qui tourne sur batterie mais plus pour des appliances normalement branch√©es sur secteur.
*Ce ne sont donc pas les puces les plus sobres qui existent.*

*√Ä cela on rajoute des drivers pas forc√©ment optimis√©s au max.*
Et le troisi√®me coup de massue : tout simplement *le userspace linux classique n'est pas autant optimis√© qu'Android sur ce point*.
Android a tout un tas de code fait pour limiter la consommation √©nergetique du code qui tourne en limitant les applis √† mort et tout.
Bha l√† c'est inexistant donc ‚Ä¶ √ßa bouffe du jus.
Les logiciels ne sont pas au courant qu'ils tournent sur une machine √† l'autonomie tr√®s limit√©e.

*Il en r√©sulte une autonomie merdique et un t√©l√©phone qui chauffe pas mal et qui en plus est assez lent par rapport aux t√©l√©phones android √† prix √©quivalent*.

### L'environnement logiciel
*Pour le commun des mortels, un t√©l√©phone sous linux n'a aucun int√©ret.*
Ici pas d'appli pour faire des bruits de prouts, pas d'appli bancaire, pas d'appli pour controler votre sonnette connect√©e, pas d'appli pour regarder la t√©l√©vision, pas d'appli pour ‚Ä¶

**En fait il n'y a juste pas d'applications mais du bon vieux logiciel.**

Pour un geek, pas juste kevin qui ach√®te le dernier iphone tous les ans et qui regarde micode les yeux qui brillent entre deux articles Clubic, non je parle d'un vrai geek ; pour lui √ßa sera par contre jouable.
*C'est un super jouet √† bidouiller.*

### Allo ?
Bon l√† j'ai pas d'avis, j'ai pas mis de carte SIM dedans et je ne compte pas le faire.
*Je sais pas si on peut vraiment t√©l√©phoner avec, je sais pas si on re√ßoit les sms, je sais pas si on capte bien.*

√áa ne m'int√©resse pas, je n'ai pas l'intention d'en faire mon t√©l√©phone usuel.
Le boulot me force √† utiliser Android sans alternative possible.

## Mais c'est de la merde ?
Je dois avouer que quand je l'ai re√ßu, j'√©tais en grande partie conscient de ces soucis.
Mais de les constater r√©ellement √ßa a √©t√© un peu *la douche froide*.

Par chance je ne l'ai pas pay√© le prix attendu puisqu'il m'a √©t√© donn√© par un f√©dinaute pour le simple prix du transport.
Jamais je n'aurai pu me permettre de balancer autant de pognon l√†-dedans d'ailleurs.
J'imagine mal les gens ayant balanc√© 1200$ √™tre satisfait.

Par contre *je ne pense pas que c'est de la merde*.
D√©j√†, parceque mine de rien ce t√©l√©phone fait un peu avancer les choses.
Une partie du prix du t√©l√©phone permet de contribuer au logiciel libre et c'est d√©j√† cool.

Ensuite il cr√©e une communaut√© d'utilisateurs qui sont pour la plupart √©galement dev et donc se penchent sur le bousin et cr√©e du logiciel en rapport.

*Les premiers jours quand j'ai test√© PureOS j'ai trouv√© √ßa tr√®s d√©cevant.*
Par contre, le weekend venu j'ai pris le temps de flasher le t√©l√©phone pour y installer autre chose.
L√†, *√ßa a √©t√© une √©piphanie avec PostmarketOS*.

## Je d√©teste Android
*Android √©tait cens√© √™tre l'OS bas√© sur Linux qui allait lib√©rer tout le monde* sur son passage mais au final on se retrouve sur un truc de plus en plus v√©rrouill√© de partout contr√¥l√© par Google.
Cet environement me semble d'ailleurs *de plus en plus hostile envers ses utilisateurs* avec les ann√©es qui passent.

Alors que les roms customs √©taient l√©gions, *les constructeurs se battent constamment pour emp√™cher le root et v√©rouillent leurs bootloaders*.
Et quand ce n'est pas le cas, il faut suivre des tutos sortis de forums louches o√π l'on installe des binaires se reposant sur des failles logiciels ou hardware en provenance de sites √©tranges.
Et le pire c'est qu'on risque de briquer le t√©l√©phone en foirant sa garantie au passage.

En plus chaque constructeur fait sa variante, chaque op√©rateur rajoute ses merdes, Google passe le premier pour pourrir l'OS.
Bref, sur un t√©l√©phone neuf on se retrouve avec un empilement de logiciels des moins rago√ªtant.

Mais heureusement un sauveur est arriv√© !

## PostmarketOS
C'est une distribution Linux qui a pour but de donner *une seconde vie aux smartphones* d√©laiss√©s par les constructeurs.
Exit Android et tout son userspace, ici on est sur du *Alpine Linux avec des scripts et des pr√©conf pour rendre les t√©l√©phones utilisables*.

Le probl√®me c'est que c'est *une petite distribution communautaire sans le sou*.
Ils sont malheureusement *tributaires des constructeurs de t√©l√©phones* : c'est au constructeur de ne pas v√©rrouiller le bootloader, c'est au constructeur de fournir des drivers libres pour le matos, c'est au construteur de publier le code n√©cessaire pour faire tourner leur matos sur du Linux quoi.

Et justement le **Librem5** (et le pinephone) est justement le t√©l√©phone le moins chiant pour cette distro vu que de base il tourne d√©j√† sur un kernel linux propre.

C'est pour cela qu'*installer PostmarketOS sur le Librem5 est au final super simple*.

Cette distribution propose plusieurs environnements.
Il y a notamment Gnome desktop/phosh/plasma/plasma-mobile/sxmo/‚Ä¶

Contrairement √† un ordinateur o√π il faut foutre le m√©dia d'installation sur cl√© USB puis booter dessus, on doit dans ce cas passer par un ordinateur.
En gros on le programme **pmbootstrap** qui permet de "construire" la distribution en fonction de ses go√ªts.
Ensuite on passe le t√©l√©phone en mode flash (on enl√®ve la batterie, on appui sur volume UP, on branche l'USB, on met la batterie) et au bout de cinq minutes c'est bon c'est install√©.

On d√©marre le t√©l√©phone et c'est flash√©.
Pas de logiciel tordu, pas de faille, pas de manip hasardeuse, pas de code d√©verouillage √† choper aupr√®s du constructeur.
Non ici, c'est volontairement facile.

Merci beaucoup **Purism** pour cela, merci beaucoup **PostmarketOS** pour cela.

## Sxmo
Bon, apr√®s avoir test√© la gnomerie de PureOS j'ai voulu test√© Plasma Mobile mais pas de chance, sur la version experimentale du jour, une d√©pendance manquait.
Je me suis donc rabattu sur ce que je voulais r√©ellement : **SXMO** [Simple X MObile](https://www.youtube.com/watch?v=c6Q1v4zRt1w).

{{< img src="firefox.png" alt="Le navigateur version classique qui affiche ce superbe blog." title="C'est le vrai firefox, pas la version b√¢tarde d'Android." >}}

C'est un environnement adapt√© √† un appareil de ptite taille et pourtant ils ont fait tous les choix les plus contre-intuitifs.
Ils utilisent **Sway** qui est fait pour √™tre utilis√© principalement au clavier, ils ont rajout√© tout un tas de menu via **bemenu** qui √† la base s'utilise √©galement au clavier.
Et le pire **c'est que √ßa marche sacr√©ment bien !**

### wvkbd
Commen√ßons par le clavier : [wvkbd](https://github.com/jjsullivan5196/wvkbd).
Il s'agit d'un composant vital apr√®s tout.

Ils ont donc fait un clavier *sans fioriture mais qui fonctionne*.

{{< img src="wvkbd.png" alt="" title="Oui le brouillon de cet article est r√©dig√© sur le t√©l√©phone mais avec le clavier physique branch√© sur le port usb." >}}

Comme vous pouvez le voir il est plut√¥t rudimentaire et s'ils proposent quelques alphabets alternatifs, il ne connait pas l'azerty ni le b√©po.
Pas de swipe, pas de pr√©diction, par contre √ßa marche avec wlroots et donc potentiellement vous pouvez le faire tourner sur votre ordinateur de bureau.

### lisgd
Mais comment utiliser avec ses gros doigts sur cet √©cran tactile ?
Et bien ils ont cr√©√© [un ptit logiciel du nom moche de lisgd](https://git.sr.ht/~mil/lisgd) permettant de lancer des actions avec des mouvements.

  - On glisse vers le bas depuis le haut pour lancer le menu syst√®me.
  - On glisse vers le haut depuis le bas pour ouvrir le clavier.
  - On glisse vers la gauche/droite pour changer de workspace, ‚Ä¶ bref vous voyez le topo.

C'est un peu difficile au premier abord mais apr√®s quelques heures √ßa le fait plut√¥t bien.
Et finalement coupl√© √† **Sway** c'est terriblement efficace !
*√áa pourrait probablement √™tre repiqu√© pour Android*.

### Bemenu
Alors l√† c'est du boulot de haute vol√©e qui a √©t√© fait.

Si comme moi vous utilisez bemenu pour avoir quelques raccourcis √† port√©e de main, *vous n'avez rien vu de la puissance de cet outil*.
Ces gens sont particuli√®rement dou√© : ils font des menus qui peuvent avoir plusieurs pages, √ßa affiche un mode dans la barre de sway, c'est pratique avec les doigts, √ßa ne n√©cessite pas le clavier.
J'ai √©t√© bluff√©, je ne pensais pas que c'√©tait possible !

{{< img src="contextual_foot.png" alt="Fonctions propos√©es : copy/paste/zoom in/zoom out/scroll up/scrool down/URL mode/hotkeys/search‚Ä¶/system menu/close menu" title="Je trouve ce menu contextuel via Bemenu compl√®tement fou !" >}}

Bemenu combin√© avec tout un tas de scripts et d'outils divers permet de g√©rer quasiment tout le t√©l√©phone : se connecter √† un r√©seau wifi, augmenter la luminosit√©, baisser le volume, prendre un screenshot, red√©marrer, lancer une appli, √™tre utilis√© en tant que menu contextuel !
Tout cela depuis un simple menu et utilisable avec les boutons physiques.

{{< img src="contextual_fx.png" alt="Le menu contextuel pour firefox avec des options en rapport avec la page." title="Et tous ces menus sont utilisables au doigt ou alors avec les boutons de volume et power (ou au clavier).">}}

Et comme le montre les screenshots, ils ont √©galement fait des menus contextuels pour l'application avec le focus dans bemenu !
üò≤

## Qu'en faire ?
Et bha pour l'instant je ne sais pas trop mais, franchement c'est une machine atypique.

J'ai test√© mon ptit dock USB-C qui me sort un hdmi avec un port ethernet et des USB.
Et le HDMI fonctionne (ptet l'ethernet aussi, pas test√©) !

{{< img src="deck.png" alt="Capture d'√©cran avec le t√©l√©phone sur le premier √©cran et firefox+weechat sur le second √©cran" title="Dualscreen fonctionnel !" >}}

J'ai d√©marr√© un film, √ßa a tourn√© sans souci, un stream twitch, une vid√©o youtube, de la musique, ssh pour de l'IRC.
*Je pense r√©ellement que la machine peut remplacer un ptit laptop une fois coupl√© √† un clavier et un dock USB-C ou tout du moins une tablette*.

## Conclusion
Je pense que c'est un tr√®s chouette joujou malheureusement bien trop cher.
L'exp√©rience est tr√®s frustrante : avoir une machine avec autant de potentiel logiciel qui se retrouve sabord√© par un hardware √† la ramasse.

Cela reste un appareil de niche et ses tr√®s faibles ventes ne vont pas arranger la chose.

Haa si seulement une bo√Æte comme Fairphone ou bien Framework se lan√ßait dans la cr√©ation d'un t√©l√©phone sous Linux avec un hardware r√©parable modulaire et avec du logiciel respectueux de l'utilisateur √ßa serait juste parfait !
Un appareil vendu avec Android mais o√π tous les drivers sont compatibles avec Linux et sans v√©rrouillage serait le chouchou des geeks.
